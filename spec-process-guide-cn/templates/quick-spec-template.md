# 快速规范模板

<!-- 导航元数据 -->
<!-- 章节：模板 | 级别：实践 | 先决条件：../methodology/lightweight-specs.md -->
<!-- 相关：micro-spec-template.md, requirements-template.md -->

**📍 您的位置：** [主指南](../../README.md) → [模板](README.md) → **快速规范模板**

## 快速导航
- **先决条件：** [轻量级规范](../methodology/lightweight-specs.md)
- **相关：** [微型规范模板](micro-spec-template.md), [完整模板](requirements-template.md)

---

适用于需要需求和任务但可以跳过设计阶段的 1-3 天功能的即用型模板。

## 模板用法

**复制以下模板并填写括号中的部分。删除不适用于您特定功能的任何部分。**

---

# [功能名称] - 快速规范

**规范类型：** 快速规范  
**估计工作量：** [X 小时/天]  
**优先级：** [高/中/低]  
**负责人：** [开发人员姓名]  
**创建日期：** [YYYY-MM-DD]  
**状态：** [草稿/审查/已批准/进行中/完成]

## 概述

**内容：** [一句话描述此功能的作用]  
**原因：** [简要理由 - 业务价值或用户需求]  
**成功指标：** [您将如何知道这是否成功]

## 需求

### 用户故事
**作为** [用户类型]  
**我希望** [能力]  
**以便** [好处/价值]

### 验收标准
- [ ] [定义成功的具体、可测试的标准]
- [ ] [另一个标准 - 关注正常路径]
- [ ] [边缘案例或错误处理要求]
- [ ] [适用的性能/质量要求]

### 约束
- **技术：** [任何技术限制或要求]
- **业务：** [任何业务规则或约束]
- **时间线：** [任何截止日期约束]

## 实施计划

### 先决条件
- [ ] [开始前需要的任何设置或依赖项]
- [ ] [访问权限或环境设置]

### 核心任务
1. **[任务名称]** - [简要描述]
   - **估计：** [X 小时]
   - **详情：** [具体实施说明]

2. **[任务名称]** - [简要描述]
   - **估计：** [X 小时]
   - **详情：** [具体实施说明]

3. **[任务名称]** - [简要描述]
   - **估计：** [X 小时]
   - **详情：** [具体实施说明]

### 测试任务
- [ ] **单元测试：** [需要单元测试覆盖的内容]
- [ ] **集成测试：** [需要集成测试的内容]
- [ ] **手动测试：** [需要手动验证的内容]

### 文档任务
- [ ] **代码注释：** [需要文档的领域]
- [ ] **README 更新：** [需要更新的文档]
- [ ] **API 文档：** [如果涉及 API 更改]

## 技术说明

### 要修改的文件
- `[文件/路径]` - [需要什么更改]
- `[文件/路径]` - [需要什么更改]

### 依赖关系
- **内部：** [此组件依赖的其他组件]
- **外部：** [第三方服务或库]

### 风险与缓解
- **风险：** [潜在问题]  
  **缓解：** [如何解决]

## 完成定义

- [ ] 满足所有验收标准
- [ ] 代码已审查和批准
- [ ] 测试已编写并通过
- [ ] 文档已更新
- [ ] 功能已部署到预演环境
- [ ] 手动测试已完成
- [ ] 获得利益相关者批准

## 回滚计划

**如果出现问题：**
1. [恢复更改的步骤]
2. [恢复先前状态的步骤]
3. [如何沟通回滚]

---

## 示例：用户个人资料图片上传

# 用户个人资料图片上传 - 快速规范

**规范类型：** 快速规范  
**估计工作量：** 2 天  
**优先级：** 中  
**负责人：** Sarah Chen  
**创建日期：** 2024-01-15  
**状态：** 已批准

## 概述

**内容：** 允许用户在他们的帐户设置中上传和显示个人资料图片  
**原因：** 用户希望个性化他们的个人资料，并更容易被队友认出  
**成功指标：** 50% 的活跃用户在 30 天内上传个人资料图片

## 需求

### 用户故事
**作为** 注册用户  
**我希望** 上传个人资料图片  
**以便** 我的个人资料更加个性化，并且我更容易被队友认出

### 验收标准
- [ ] 用户可以在个人资料设置中点击“上传照片”按钮
- [ ] 系统接受最大 5MB 的 JPG、PNG 和 GIF 文件
- [ ] 图像自动调整为 200x200px
- [ ] 个人资料图片显示在导航栏和个人资料页面
- [ ] 用户可以删除他们的个人资料图片并返回默认头像
- [ ] 对无效文件类型或大小显示错误消息

### 约束
- **技术：** 必须与现有的 S3 存储桶集成以进行文件存储
- **业务：** 图像必须适合家庭观看（目前手动审核）
- **时间线：** Q1 用户参与度目标所需

## 实施计划

### 先决条件
- [ ] 确认 profile-images 文件夹的 S3 存储桶权限
- [ ] 安装图像处理库 (sharp.js)

### 核心任务
1. **前端上传组件** - 在个人资料设置中添​​加文件上传 UI
   - **估计：** 6 小时
   - **详情：** 文件输入、预览、进度指示器、错误处理

2. **后端上传端点** - 处理文件上传和处理
   - **估计：** 8 小时
   - **详情：** 验证文件、调整图像大小、上传到 S3、更新用户记录

3. **个人资料显示更新** - 在整个应用程序中显示个人资料图片
   - **估计：** 4 小时
   - **详情：** 更新导航栏组件、个人资料页面、用户卡片

### 测试任务
- [ ] **单元测试：** 文件验证、图像处理功能
- [ ] **集成测试：** 上传端点、S3 集成
- [ ] **手动测试：** 上传流程、不同文件类型、错误案例

### 文档任务
- [ ] **代码注释：** 图像处理和 S3 上传功能
- [ ] **API 文档：** 记录新的上传端点

## 技术说明

### 要修改的文件
- `components/ProfileSettings.jsx` - 添加上传 UI
- `api/users/upload-avatar.js` - 新的上传端点
- `components/Navbar.jsx` - 显示个人资料图片
- `components/UserCard.jsx` - 显示个人资料图片

### 依赖关系
- **内部：** 用户认证、S3 服务包装器
- **外部：** sharp.js 用于图像处理

### 风险与缓解
- **风险：** 大文件上传可能会影响性能  
  **缓解：** 客户端文件大小验证、服务器端限制

## 完成定义

- [ ] 满足所有验收标准
- [ ] 代码已审查和批准
- [ ] 测试已编写并通过
- [ ] API 文档已更新
- [ ] 功能已部署到预演环境
- [ ] 使用不同文件类型完成手动测试
- [ ] 收到产品负责人批准

## 回滚计划

**如果出现问题：**
1. 通过功能标志禁用上传端点
2. 恢复前端更改以隐藏上传 UI
3. 通过应用内消息通知用户暂时不可用

---

## 模板变体

### API 端点快速规范
```markdown
# [端点名称] API - 快速规范

## 需求
**端点：** [方法] /api/[路径]
**目的：** [此端点的作用]
**认证：** [所需的认证级别]

### 请求格式
```json
{
  "field": "value"
}
```

### 响应格式
```json
{
  "result": "success"
}
```

### 错误响应
- `400` - [错误请求场景]
- `401` - [未经授权的场景]
- `500` - [服务器错误场景]

## 实施任务
1. **路由处理程序** - [X 小时]
2. **验证** - [X 小时]  
3. **数据库操作** - [X 小时]
4. **测试** - [X 小时]
```

### 错误修复快速规范
```markdown
# 错误修复：[问题描述] - 快速规范

## 问题
**问题：** [哪里坏了]
**影响：** [谁/什么受到影响]
**根本原因：** [为什么会发生]

## 解决方案
**修复：** [如何解决]
**文件：** [需要更改哪些文件]
**风险：** [潜在的副作用]

## 实施
1. **[修复步骤]** - [X 小时]
2. **[测试步骤]** - [X 小时]
3. **[验证步骤]** - [X 小时]

## 验证
- [ ] [如何测试修复]
- [ ] [如何确保没有回归]
```

---

## 🔗 相关内容

### 先决条件
- [轻量级规范指南](../methodology/lightweight-specs.md)

### 其他模板
- [微型规范模板](micro-spec-template.md) - 适用于更小的更改
- [完整规范模板](requirements-template.md) - 适用于复杂功能

### 示例
- [快速规范示例](../examples/lightweight-examples.md)

[← 返回模板](README.md) | [微型规范模板 →](micro-spec-template.md)
